#!/usr/bin/perl

# ==========================================================================
use strict;
use warnings;

# ==========================================================================
use Test::More; # tests => 6;

# ==========================================================================
BEGIN { use_ok( 'Parse::MAL' ); }

# ==========================================================================
can_ok('Parse::MAL', 'new');

# ==========================================================================
my $parser = Parse::MAL -> new();

# ==========================================================================
isa_ok($parser, 'Parse::MAL');
isa_ok($parser, 'Parse::Yapp::Driver');

# ==========================================================================
can_ok($parser, 'process');
can_ok($parser, 'get_errors');

# ==========================================================================
my ($input, $expected);

# ==========================================================================
$input    = 'ac := ac + 1;';
$expected = 0b00000000000100010001011000000000;
is($parser -> process($input), $expected, 'ac++ with direct string');

# ==========================================================================
$input    = 'ac := ac + 1; if n then goto 4;';
$expected = 0b00100000000100010001011000000100;
is($parser -> process($input), $expected, 'ac++ and goto with direct string');

# ==========================================================================
# ==========================================================================
done_testing();

# ==========================================================================

